angular.module("jkuri.touchspin",[]).directive("ngTouchSpin",["$timeout","$interval","$document",function(e,t,a){"use strict"
var n=function(e,t){e.min=e.min||0,e.max=e.max||100,e.step=e.step||1,e.prefix=e.prefix||void 0,e.postfix=e.postfix||void 0,e.decimals=e.decimals||0,e.stepInterval=e.stepInterval||100,e.stepIntervalDelay=e.stepIntervalDelay||500,e.val=e.value||parseFloat(e.initval).toFixed(e.decimals)}
return{restrict:"EA",require:"?ngModel",scope:{min:"@?",max:"@?",step:"@?",prefix:"@?",postfix:"@?",decimals:"@?",stepInterval:"@?",stepIntervalDelay:"@?",initval:"@?",value:"@?"},replace:!0,link:function(i,s,l,o){var p,r,c,u
a.find("body")
i.decrement=function(){c=i.val
var e=parseFloat(parseFloat(Number(i.val))-parseFloat(i.step)).toFixed(i.decimals)
return e<i.min?(e=parseFloat(i.min).toFixed(i.decimals),i.val=e,void o.$setViewValue(e)):(i.val=e,void o.$setViewValue(e))},i.increment=function(){c=i.val
var e=parseFloat(parseFloat(Number(i.val))+parseFloat(i.step)).toFixed(i.decimals)
e>i.max||(i.val=e,o.$setViewValue(e))},i.startSpinUp=function(){i.checkValue(),i.increment(),u=Date.now(),i.stopSpin(),e(function(){r=t(function(){i.increment()},i.stepInterval)},i.stepIntervalDelay)},i.startSpinDown=function(){i.checkValue(),i.decrement(),u=Date.now()
e(function(){r=t(function(){i.decrement()},i.stepInterval)},i.stepIntervalDelay)},i.stopSpin=function(){Date.now()-u>i.stepIntervalDelay?(e.cancel(p),t.cancel(r)):e(function(){e.cancel(p),t.cancel(r)},i.stepIntervalDelay)},i.checkValue=function(){if(i.val.match(/^-?(?:\d+|\d*\.\d+)$/i))o.$setViewValue(parseFloat(i.val))
else{var e=""!==c?parseFloat(c).toFixed(i.decimals):parseFloat(i.min).toFixed(i.decimals)
i.val=e,o.$setViewValue(e)}},o.$render=function(){i.val=o.$viewValue},i.$watch("initval",function(e){void 0===e||isNaN(parseFloat(e))||(n(i,e),c=i.val,o.$setViewValue(i.val))})},template:'<div class="input-group">  <span class="input-group-btn" ng-show="!verticalButtons">    <button class="btn btn-default" ng-mousedown="startSpinDown()" ng-mouseup="stopSpin()"><i class="fa fa-minus"></i></button>  </span>  <span class="input-group-addon" ng-show="prefix" ng-bind="prefix"></span>  <input type="text" ng-model="val" class="form-control" ng-blur="checkValue()">  <span class="input-group-addon" ng-show="postfix" ng-bind="postfix"></span>  <span class="input-group-btn" ng-show="!verticalButtons">    <button class="btn btn-default" ng-mousedown="startSpinUp()" ng-mouseup="stopSpin()"><i class="fa fa-plus"></i></button>  </span></div>'}}])
