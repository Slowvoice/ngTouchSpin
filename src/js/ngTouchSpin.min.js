angular.module("jkuri.touchspin",[]).directive("ngTouchSpin",["$timeout","$interval",function(t,a){"use strict"
var e=function(t,a){t.min=parseFloat(t.min)||0,t.max=parseFloat(t.max)||100,t.step=parseFloat(t.step)||1,t.prefix=t.prefix||void 0,t.postfix=t.postfix||void 0,t.decimals=parseFloat(t.decimals)||0,t.stepInterval=t.stepInterval||100,t.stepIntervalDelay=t.stepIntervalDelay||500,t.val=parseFloat(t.initval).toFixed(t.decimals),t.oldval=parseFloat(t.initval)}
return{restrict:"E",scope:{min:"@?",max:"@?",step:"@?",prefix:"@?",postfix:"@?",decimals:"@?",stepInterval:"@?",stepIntervalDelay:"@?",initval:"@?",value:"@?"},replace:!0,link:function(n,i,l,s){var o,p,r
n.decrement=function(){var t=parseFloat(n.val)-parseFloat(n.step)
return t<n.min?void(n.val=n.min.toFixed(n.decimals)):(n.val=t.toFixed(n.decimals),void n.$emit("estimateEdit",t))},n.increment=function(){var t=parseFloat(n.val)+parseFloat(n.step)
return t>n.max?void(n.val=n.max.toFixed(n.decimals)):(n.val=t.toFixed(n.decimals),void n.$emit("estimateEdit",t))},n.startSpinUp=function(){n.increment(),r=Date.now(),t(function(){p=a(function(){n.increment()},n.stepInterval)},n.stepIntervalDelay)},n.startSpinDown=function(){n.decrement(),r=Date.now()
t(function(){p=a(function(){n.decrement()},n.stepInterval)},n.stepIntervalDelay)},n.stopSpin=function(){Date.now()-r>n.stepIntervalDelay?(t.cancel(o),a.cancel(p)):t(function(){t.cancel(o),a.cancel(p)},n.stepIntervalDelay)},n.checkValue=function(){if(n.val.match(/^-?(?:\d+|\d*\.\d+)$/i)){var t=parseFloat(n.val)
if(t<n.min)return void(n.val=n.min.toFixed(n.decimals))
if(t>n.max)return void(n.val=n.max.toFixed(n.decimals))
n.val=t.toFixed(n.decimals),n.oldval=t}else n.val=n.oldval.toFixed(n.decimals)},n.keyup=function(t){if(n.val.match(/^-?(?:\d+|\d*\.\d+)$/i)){var a=parseFloat(n.val)
n.oldval!=a&&a>=n.min&&a<=n.max&&(n.$emit("estimateEdit",a),n.oldval=a)}},n.$watch("initval",function(t,a){void 0===t||isNaN(parseFloat(t))||!isNaN(parseFloat(a))&&parseFloat(a)!=parseFloat(t)||e(n,t)})},template:'<div class="input-group">  <span class="input-group-btn" ng-show="!verticalButtons">    <button class="btn btn-default" ng-mousedown="startSpinDown()" ng-mouseup="stopSpin()"><i class="fa fa-minus"></i></button>  </span>  <span class="input-group-addon" ng-show="prefix" ng-bind="prefix"></span>  <input type="text" ng-model="val" class="form-control" ng-blur="checkValue()" ng-keyup="keyup($event)">  <span class="input-group-addon" ng-show="postfix" ng-bind="postfix"></span>  <span class="input-group-btn" ng-show="!verticalButtons">    <button class="btn btn-default" ng-mousedown="startSpinUp()" ng-mouseup="stopSpin()"><i class="fa fa-plus"></i></button>  </span></div>'}}])
